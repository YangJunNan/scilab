postbuild windows:
  stage: postbuild
  tags:
    - windows
  script:
    - echo "nothing to postbuild"


postbuild linux:
  stage: postbuild
  tags:
    - linux
  script:
    - echo "nothing to postbuild"


# build javadoc
postbuild javadoc:
  stage: postbuild
  tags: ["docker"]
  image: docker.io/openjdk:8-jdk-alpine
  script:
    - |
      MASK="scilab/modules/*/src/java/";
      MODULES=`ls -d $MASK`;
      for M in $MODULES; do
        LISTMODULES="$M:$LISTMODULES";
        MODULE=$$(echo $M|cut -d/ -f4);
        LISTPKG="$LISTPKG org.scilab.modules.$MODULE";
      done;
      $(JAVADOC) -d public -sourcepath $LISTMODULES $LISTPKG
  artifacts:
    paths:
      - public
